## 集中式 vs 分布式

### 集中式

1.  集中式版本控制系统，版本库是集中存放在中央服务器的，而干活的时候，用的都是自己的电脑，所以要先从中央服务器取得最新的版本，然后开始干活，干完活了，再把自己的活推送给中央服务器。中央服务器就好比是一个图书馆，你要改一本书，必须先从图书馆借出来，然后回到家自己改，改完了，再放回图书馆。
2.  集中式版本控制系统最大的毛病就是必须联网才能工作，遇到网速慢的话，可能提交一个10M的文件就需要5分钟
3.  集中式版本控制系统的中央服务器要是出了问题，所有人都没法干活了

### 分布式

1.  分布式版本控制系统根本没有“中央服务器”，每个人的电脑上都是一个完整的版本库，这样，你工作的时候，就不需要联网了，因为版本库就在你自己的电脑上
2.  和集中式版本控制系统相比，分布式版本控制系统的安全性要高很多，因为每个人电脑里都有完整的版本库，某一个人的电脑坏掉了不要紧，随便从其他人那里复制一个就可以了

### 版本控制系统

1.  只能跟踪文本文件的改动，比如TXT文件，网页，所有的程序代码等等
2.  没法跟踪图片、视频这些二进制文件的变化
3.  Microsoft的Word格式是二进制格式，因此，版本控制系统是没法跟踪Word文件的改动的

------

## 本地仓库

### 创建

1.  cd到目标目录，使用`git init`
2.  当前目录下多了一个`.git`的目录，这个目录是Git来跟踪管理版本库的

### 提交

1.  `git add`
2.  `git commit -m ""`

### 对比

1.  `git status`
2.  `git diff`

### 版本回退

1.  `git log` / `git log --pretty=oneline`
2.  在Git中，用`HEAD`表示当前版本。上一个版本就是`HEAD^`，上上一个版本就是`HEAD^^`，当然往上100个版本写100个`^`比较容易数不过来，所以写成`HEAD~100`
3.  `git reset --hard HEAD^`
4.  最新的那个版本已经看不到了！好比你从21世纪坐时光穿梭机来到了19世纪，想再回去已经回不去了，肿么办？
    -   只要上面的命令行窗口还没有被关掉，你就可以顺着往上找啊找啊，找到那个最新版本的`commit id`
        -   `git reset --hard 031d`
    -   找不到``commit id`了，Git提供了一个命令`git reflog`用来记录你的每一次命令
        -   `git reflog`

### 撤销修改

1.  工作区文件修改了，但没add到stage缓存区，回到版本库状态：`git restore 文件`
2.  工作区文件修改且add到stage缓存区，想回到版本库状态：
    1.  恢复缓存区：`git restore --staged 文件`
    2.  恢复工作区：`git restore 文件`

### 删除文件

1.  工作区文件误删想恢复，`git restore 文件`
2.  工作区和版本库都想删
    -   `git rm test.txt`
    -   `git commit -m XXX`

------

## 工作区和版本库

### 工作区

1.  电脑里能看到的目录

### 版本库

1.  工作区有一个隐藏目录`.git`就是其版本库

2.  版本库里存了很多东西，其中最重要的就是称为stage（或者叫index）的暂存区，还有Git为我们自动创建的第一个分支`master`，以及指向`master`的一个指针叫`HEAD`

    ![git-repo](https://www.liaoxuefeng.com/files/attachments/919020037470528/0)

3.  第一步是用`git add`把文件添加进去，实际上就是把文件修改添加到暂存区；

    第二步是用`git commit`提交更改，实际上就是把暂存区的所有内容提交到当前分支。

4.  第一次修改 -> `git add` -> 第二次修改 -> `git commit`

    Git管理的是修改，当你用`git add`命令后，在工作区的第一次修改被放入暂存区，准备提交，但是，在工作区的第二次修改并没有放入暂存区，所以，`git commit`只负责把暂存区的修改提交了，也就是第一次的修改被提交了，第二次的修改不会被提交

------

## 远程仓库

1.  在github上新建仓库

2.  本地库关联远程库`git remote add origin https://github.com/louisyanglu/gitlearn.git`

    远程库的名字就是`origin`，这是Git默认的叫法

3.  把本地库的所有内容推送到远程库上`git push -u origin master`

    由于远程库是空的，我们第一次推送`master`分支时，加上了`-u`参数，Git不但会把本地的`master`分支内容推送的远程新的`master`分支，还会把本地的`master`分支和远程的`master`分支关联起来，在以后的推送或者拉取时就可以简化命令。